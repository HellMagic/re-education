.container.content
  %nav.breadcrumb
    %ul
      %li
        %a{ :href => "#" } 首页
      %li
        %a{ :href => "#" } 案例
      %li.active
        %a{ :href => "#" } 精品

%article.plan.edit
  = form_for :lessonplan, :url => { :action => 'create' } do |f|  

    %section
      = label_tag 'lessonplan[title]', '教案名称'
      = f.text_field :title, :placeholder => '给你的教案起一个名字...'

    %section
      %h3 教程介绍
      = label_tag 'lessonplan[attachment]', '封面图片', :id => "attachment-label"
      = f.file_field :attachment, :class => "file_input",:onchange => 'try {return validate_file(this)} catch(e){}'
      = label_tag 'lessonplan[short_description]', '简短描述(140字)'
      = f.text_area :short_description, :placeholder => '说出这个活动的亮点...', :rows => 4, :maxlength => 140, :cols => 60
      
      = label_tag 'lessonplan[content]', '详细内容'
      %small.help-info 简要说明课程年级、学科、学生情况、教学思路等...
      = description_editor f

    %section.plan-step{ 'ng-controller' => 'CachedTasksController', 'ng-init' => "init();" }
      %h3 活动步骤
      %ol.steps
        %li{ 'ng-repeat' => 'task in cachedTasks', :class => 'editable-task-item-{{$index}}', 'ng-controller' => 'TaskController', 'on-load' => 'init();' }
          %label {{$index + 1}}
          .step-content
            %div{ :class => 'inline-edit-task-form-{{$index}}' }
              %label 步骤名称
              %input.task-item-title.focus-editable{ :placeholder => '填写一个课程活动步骤...', :value => '{{task.title}}', :type => 'text', :name => 'tasks[][title]' }
              %label 详细内容
              .wysihtml5-wrapper
                .toolbar{ :style => "display: none;" }
                  %a{ 'data-wysihtml5-command' => "bold", :title => "加粗" } &#xe77a;
                  %a{ 'data-wysihtml5-command' => "insertUnorderedList", :title => "无序列表" } &#xf0ca;
                  %a{ 'data-wysihtml5-command' => "insertUnorderedList", :title => "有序列表" } &#xf0cb;
                  %a.file-upload-wrapper{ href: 'javascript:;', title: "添加图片" }
                    &#x1f304;
                    %input.jquery-file-uploader{ type: "file", name: "upload[upload]", multiple: "true", :accept => "image/*" }
                %textarea.wysihtml5.task-item-content.focus-editable{ :placeholder => '每一步如何做，才能完成作品...', :maxlength => 1000, :value => '{{task.content}}', :name => 'tasks[][content]' }
              %input{ :type => 'hidden', :value => '{{task.id}}', :name => 'tasks[][id]' }
            %a.btn.btn-danger.delete.plan-action{ :href => 'javascript:;', 'ng-click' => 'deleteTask($index)', :title => '删除' } 删除
        %li.new-step
          %a.btn{ :href => 'javascript:;', 'ng-click' => 'addTask()' } 添加步骤
    %section
      = f.submit '保存教案', :class => 'btn btn-primary'


